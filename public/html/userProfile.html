<!--
//Copyright {2016} {NIIT Limited, Wipro Limited}
//
//   Licensed under the Apache License, Version 2.0 (the "License");
//   you may not use this file except in compliance with the License.
//   You may obtain a copy of the License at
//
//       http://www.apache.org/licenses/LICENSE-2.0
//
//   Unless required by applicable law or agreed to in writing, software
//   distributed under the License is distributed on an "AS IS" BASIS,
//   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
//   See the License for the specific language governing permissions and
//   limitations under the License.
//
//   Name of Developers  Raghav Goel, Kshitij Jain, Lakshay Bansal, Ayush Jain, Saurabh Gupta, Akshay Meher
//
-->
<link href='https://fonts.googleapis.com/css?family=Roboto+Condensed' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Bitter' rel='stylesheet' type='text/css'>
<div ng-if="loggedInUser" class="container" id="main">
	<div class="row user">
		<div class="col-xs-11 col-sm-8 col-md-2 col-lg-2 profile">
			<img ng-src="{{loggedInUser.imageLink}}" class="img-circle img-responsive pull-left">
			<div class="row">
				<div class="col-xs-3 col-sm-12 col-md-4 col-lg-4">
					<img ng-if="lastWonBadge.badgeUrl" ng-src={{lastWonBadge.badgeUrl}} class="img img-responsive badge-img">
				</div>
				<div class="col-xs-9 col-sm-12 col-md-8 col-lg-8">
					<h4 ng-if='lastWonBadge.badgeName' class="badge-name">{{lastWonBadge.badgeName}}</h4>
				</div>
			</div>
			<h4 class="user-name">{{loggedInUser.name}}, {{loggedInUser.age}}</h4>
			<div class="row">
				<!-- div for badge count -->
				<!--<div class="col-xs-12 col-md-6 col-lg-5 numberCircle" data-toggle="tooltip" title="Badge Count" ng-init="loggedInUser.badgeCount=0">
				{{loggedInUser.badges.length}}
			</div>-->
			<div class="col-xs-12 col-md-12 col-lg-12">
				<span class="glyphicon glyphicon-map-marker"></span>
				<span id="country">{{loggedInUser.country | uppercase}}</span>
			</div>
		</div>
		<!--<span id="flag"><img ng-src="{{data.flagLink}}" alt="user image" width="30px" height="30px" class="img-rounded">
	</span>-->
</div>

<div class="col-xs-12 col-sm-9 col-md-9 col-lg-9" id="GamesInfo">
	<div class="row">
		<div class=" col-xs-4" id="games">
			<span class="glyphicon glyphicon-tower glyph"></span>
			<p>Games</br>{{loggedInUser.totalGames}}
			</p>
		</div>
		<div class="col-xs-4" id="win">
			<span class="glyphicon glyphicon-thumbs-up glyph"></span>
			<p>Wins</br>{{loggedInUser.wins}}
			</p>
		</div>
		<div class="col-xs-4" id="winpercentage">
			<span class="glyphicon glyphicon-stats glyph"></span>
			<p>Win%
				<br>{{loggedInUser.wins/loggedInUser.totalGames*100 | number : 2}}%
			</p>
		</div>
	</div><br>
	<div class="row streak-row">
		<div class="col-xs-4" id="current-streak">
			<span class="glyphicon glyphicon-star glyph"></span>
			<p>Current Streak</p>
		</div>
		<div class="col-xs-8 streak-details">
			<span class="glyphicon glyphicon-chevron-right"></span>
			<span>Best Score : {{loggedInUser.bestScoreCur}}</span><br>
			<span class="glyphicon glyphicon-chevron-right"></span>
			<span>Duration:  <strong>{{loggedInUser.streakDaysCur}} Days  {{loggedInUser.streakDateCur}}</strong></span>
		</div>
	</div>
	<div class="row streak-row">
		<div class=" col-xs-4" id="streak">
			<span class="glyphicon glyphicon-certificate glyph"></span>
			<p>Longest Streak</p>
		</div>
		<div class=" col-xs-8 streak-details">
			<span class="glyphicon glyphicon-chevron-right"></span>
			<span>Best Score: {{loggedInUser.bestScore}}</span><br>
			<span class="glyphicon glyphicon-chevron-right"></span>
			<span>Duration: <strong>{{loggedInUser.streakDays}} Days  {{loggedInUser.streakDate}}</strong></span>
		</div>
	</div>
	<!--<div class="row streak">
	<span class="glyphicon glyphicon-list streakIcon"></span> &nbsp;QuizRT Streak
</div>
<div class="row streakDetails">
<div class="col-xs-5 streakScore">
<span>Longest Game Streak:&nbsp;&nbsp;&nbsp;<strong>{{loggedInUser.gamePlayedCount}} Games</strong></span>
</div>
<div class="col-xs-7 streakDate">
<span>Day Streak:&nbsp;&nbsp;&nbsp;<strong>{{loggedInUser.streakDays}} Days&nbsp;&nbsp;{{loggedInUser.streakDate}}</strong></span>
</div>
</div>
<div class="row streakDetails">
<div class="col-xs-5 streakScore">
<span>Current Streak:&nbsp;&nbsp;&nbsp;<strong>{{loggedInUser.gamePlayedCountCur}} Games</strong></span>
</div>
<div class="col-xs-7 streakDate">
<span>Day Streak:&nbsp;&nbsp;&nbsp;<strong>{{loggedInUser.streakDaysCur}} Days&nbsp;&nbsp;{{loggedInUser.streakDateCur}}</strong></span>
</div>
</div>-->
</div>
</div>
<div class="row user rankInfo">
	<div class=" col-xs-3" id="winRank">
		<span class="glyphicon glyphicon-king glyphRank"></span>
		<p>Wins Rank</br>{{loggedInUser.winRank}}
		</p>
	</div>
	<div class="col-xs-3" id="pointsRank">
		<span class="glyphicon glyphicon-fire glyphRank"></span>
		<p>Points Rank</br>{{loggedInUser.pointsRank}}
		</p>
	</div>
	<div class="col-xs-3" id="speedRank">
		<span class="glyphicon glyphicon-knight glyphRank"></span>
		<p>Speed Rank
			<br>{{loggedInUser.speedRank}}
		</p>
	</div>
	<div class="col-xs-3" id="accuracyRank">
		<span class="glyphicon glyphicon-ok-circle glyphRank"></span>
		<p>Accuracy Rank
			<br>{{loggedInUser.accuracyRank}}
		</p>
	</div>
</div>

<!--  test-->
<div class="row sectionHeader">Find a Friend</div>
<div class="row topic-info play-button-bar"  >
	<!-- <div class="row topic-info" ng-hide="topicsFollowed.length > 0"> -->
	<div id="foot" class="row">
		<div  class="col-xs-12 play-button-bar">
			<div class="InviteFriends" ng-controller="userProfileController">
				<button href="#inviteFriends" role="button" class="btn btn-info" ng-click="searchPeople1();clearSearch()" data-toggle="modal"><span class="glyphicon glyphicon-search"></span>Find a Friend</button>
				<div class="modal fade" id="inviteFriends" tabindex="-1" role="dialog">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
								<h4 class="modal-title">Find a Friend </h4>
							</div>
							<div class="modal-body" >
								<label><input id="name" type="radio" class="option-input radio" name="rdoResult" ng-model="changedVal" value="name" ng-click="searchPeople1();clearSearch();getVal(changedVal);showOne()">Name</label>
								<label><input id="topic" type="radio" class="option-input radio"name="rdoResult" ng-model="changedVal" value="topic" ng-click="searchPeople1();clearSearch();getVal(changedVal);showThree()">Topic</label>
								<label><input id="name" type="radio" class="option-input radio"name="rdoResult" ng-model="changedVal" value="country" ng-click="searchPeople1();clearSearch();getVal(changedVal);showOne()">Country</label>
							</br><input type="text" id="searchbox" class="form-control" ng-model = "user"  ng-change = 'searchPeople1(); userData(user);topicsList(user)' style="width:100px ,height:20px;" />

							<div class="modalTable row" ng-show="one"  >
								<div class="thead">
									<div class="th tableHead col-xs-3 col-sm-4">Image</div>
									<div class="th tableHead col-xs-5 col-sm-4">Name</div>
									<div class="th tableHead col-xs-4 col-sm-4">Country</div>
								</div>
								<div class="tbody">
									<div class="modalTableRow" ng-if="user"  ng-repeat="item in searchPeople |filter: { userId : '!' + loggedInUser.userId }  ">
										<div class="tr row" ng-click="toggleSelectFriend($index)">
											<div class="td tableValue col-xs-3 col-sm-4"><label><img src="{{item.imageLink}}" alt="userImage" /><label></div>
												<div class="td  tableValue col-xs-5 col-sm-4"><label><a href="#" class = "link" ng-click="selectedUser(item)" >{{item.name}}</a><label></div>
													<div class="td tableValue col-xs-4 col-sm-4"><label>{{item.country}}<label></div>
													</div>
												</div>
											</div><!-- end tbody-->
										</div><!-- end topTenTable -->

										<div class="modalTable row" id="xxx"  ng-show="three" >
											<div class="thead">
												<div class="th col-xs-12">Topics List</div>
											</div>
											<div class="tbody">
												<div class="tr-wrap" ng-if="user" ng-repeat="topic in topicsData">
													<div class="td tableHead col-xs-12"><label ng-click="selectedTopic(topic._id);userData();showFour()" ><span>{{topic._id}}</span></label></div>
												</div>
											</div><!-- end tbody-->
										</div><!-- end topTenTable -->

										<div class="modalTable row" ng-show="four">
											<div class="thead">
												<div class="th tableHead col-xs-3 col-sm-3">Image</div>
												<div class="th tableHead col-xs-6 col-sm-3">Name</div>
												<div id="mySlider" class="th tableHead col-sm-3">Topic</div>
												<div class="th tableHead col-xs-3 col-sm-3">Games</div>
											</div>
											<div class="tbody">
												<div class="modalTableRow" ng-if="user" ng-repeat="item in topicSortList | orderBy:'-gamesPlayed'">
													<div class="tr row"  ng-click="toggleSelectFriend($index)">
														<div class="td tableValue col-xs-3 col-sm-3"><label><img src="{{item.image}}" alt="UserImage"/></label></div>
														<div class="td tableValue col-xs-6 col-sm-3"><label><a href="#" class = "link" ng-click="selectedUser(item)" >{{item.name}}</a><label></div>
															<div id="mySlider" class="td  tableValue col-sm-3"><label>{{item.topicId}}<label></div>
																<div class="td tableValue col-xs-3 col-sm-3"><label>{{item.gamesPlayed}}<label></div>
																</div>
															</div>
														</div><!-- end tbody-->
													</div><!-- end topTenTable -->
												</div><!-- end modal-body -->
											</div><!-- /.modal-content -->
										</div><!-- /.modal-dialog -->
									</div><!-- /.modal -->
								</div>
							</div>
						</div>
					</div>


					<!--end test  -->
					<!--Badges section starts-->
					<section id="badgesWon" ng-if="userBadgeArr.length>0">
						<h4 class="row sectionHeader">Your Badges <span class="count-box">{{userBadgeArr.length}}</span></h4>
						<div class="row">
							<div class="col-xs-12 col-md-6 col-lg-4 badgebox" ng-repeat="x in userBadgeArr">
								<div class="row">
									<div class="col-xs-3 col-md-3 col-lg-3">
										<img ng-src="{{x.badgeUrl}}" class="img img-responsive pull-left badges">
									</div>
									<div class="col-xs-9 col-md-9 col-lg-9">
										<h5 class="badge-name">{{x.badgeName}}</h5>
										<p>{{x.badgeDesc}}</p>
									</div>
								</div>
							</div>
						</div>
					</section>
					<!--Badges section ends-->
					<!-- User Game Activity -->
					<section id="gameActivity">
						<h4 class="row sectionHeader">Game Activity</h4>
						<div class="row" id="activity-info" ng-if="loadVisitData">
							<c3-simple id="chart" config="chart"></c3-simple>
						</div>
					</section>
					<!-- User Game Activity End-->
					<h4 class="row sectionHeader">Favourite Topics</h4>
					<div class="row topic-info" ng-hide="topicsFollowed.length > 0">
						<span class="default-msg">You have not followed any topics as yet. How about picking some topics from below.</span>
					</div>
					<section id="topics-holder">
						<div class="row topic-info" ng-show="topicsFollowed.length > 0">
							<div class="topicsholder" ng-repeat="topic in topicsFollowed|limitTo:a|orderBy:'-level'">
								<div class="topic-panel panel panel-default">
									<div class="panel-body content">
										<a><img ng-src="{{topic.topicId.topicIcon}}" ng-click="showFollowedTopic(topic.topicId._id)"></a>
										<span class="badge">{{topic.level}}</span>
									</div>
									<div class="panel-footer">
										<p>{{topic.topicId.topicName}}</p>
										<span class="win-loss">
											<span class="wins">{{topic.gamesWon}}</span> /<span class="played"> {{topic.gamesPlayed}} </span>
										</span>
									</div>
								</div>
							</div>
							<!-- end topicsholder-->
							<div class="col-xs-3 topicsholder" ng-if="topicsFollowed.length>11">
								<div>
									<button ng-if="topicsFollowed.length>=8" ng-click="seeHide(topicsFollowed.length)"><img ng-src="{{btnImg}}" class="img-rounded"></button>
								</div>
							</div>
						</div>
						<!-- end topicinfo row -->
						<div id="foot" class="row">
							<div col-xs-12 class="play-button-bar">
								<button class="play-now-button btn btn-success" ng-click="play()">More Topics</button>
							</div>
						</div>
					</section>
					<!--  recentGames Section -->
					<section id="recentGames">
						<h4 class="row sectionHeader">Recently played Quizzes</h4>
						<div class="row topic-info" ng-hide="recentGameResults.length">
							<span class="default-msg">No recent games.</span>
						</div>
						<div class="row btnRow">
							<button type="button" class="btn btn-info" ng-repeat="game in recentGameResults" ng-click="showRecentResult(game.gameId)">{{game.topicId}}</button>
						</div>
					</section>

					<!--  Invitations Section -->
					<section>
						<h4 class="row sectionHeader">Invitations</h4>
						<div class="row topic-info" ng-hide="invitations.length > 0">
							<span class="default-msg">Inbox is empty.</span>
						</div>
						<div class="row topic-info" ng-show="invitations.length > 0">
							<div class="topicsholder" ng-repeat="invitation in invitations">
								<div class="topic-panel panel panel-default">
									<div class="panel-body content">
										<a><img ng-src="{{invitation.imageUrl}}" ng-click="showInvitationDetails(invitation._id)"></a>
										<span class="badge">{{invitation.length}}</span>
									</div>
									<div class="panel-footer">
										<p>{{invitation.title}}</p>
									</div>
								</div>
							</div>
							<!-- end topicsholder-->
							<!-- <div class="col-xs-3 topicsholder" ng-if="topicsFollowed.length>11">
							<div>
							<button ng-if="topicsFollowed.length>=8" ng-click="seeHide(topicsFollowed.length)"><img ng-src="{{btnImg}}" class="img-rounded"></button>
						</div>
					</div> -->
				</div>
				<!-- end topicinfo row -->

				<div id="foot" class="row" ng-if="invitations.length > 0">
					<div col-xs-12 class="play-button-bar">
						<button class="play-now-button btn btn-success" ng-click="redirectTo('userTeams')">Show All</button>
					</div>
				</div>
			</section>
			<!--  End invitations Section -->


			<!--  Tournament Section -->
			<section>
				<h4 class="row sectionHeader">Live Tournaments</h4>
				<div class="row topic-info" ng-hide="tournaments.length > 0">
					<span class="default-msg">You are not part of any tournaments. How about participating right now!!</span>
				</div>
				<div class="row topic-info" ng-show="tournaments.length > 0">
					<div class="topicsholder" ng-repeat="tournament in tournaments">
						<div class="topic-panel panel panel-default">
							<div class="panel-body content">
								<a><img ng-src="{{tournament.imageUrl}}" ng-click="showTournamentDetails(tournament._id)"></a>
								<span class="badge">{{tournament.topics.length}}</span>
							</div>
							<div class="panel-footer">
								<p>{{tournament.title}}</p>
							</div>
						</div>
					</div>
					<!-- end topicsholder-->
					<!-- <div class="col-xs-3 topicsholder" ng-if="topicsFollowed.length>11">
					<div>
					<button ng-if="topicsFollowed.length>=8" ng-click="seeHide(topicsFollowed.length)"><img ng-src="{{btnImg}}" class="img-rounded"></button>
				</div>
			</div> -->
		</div>
		<!-- end topicinfo row -->
	</section>

	<section ng-show="friends.length > 0">
		<div class="row sectionHeader">Friends</div>
		<div class="row topic-info" >
			<div class="friendList panel-body content td col-xs-4" ng-repeat="friend in friends">
				<a ng-click="viewUserProfile(friend.userId)"><p class="friendName">{{friend.userId}}</p><img ng-click="viewUserProfile(friend.userId)" class="img-circle img-responsive pull-left profile-pic" width="120px" height="120px" ng-src="{{friend.imageLink}}"></a>
			</div>
		</div> <!-- end friendsinfo row -->

	</section><!--  End friends Section -->



</div>
<!-- end container -->

<!-- All Javascript at the bottom of the page for faster page loading -->

<!-- First try for the online version of jQuery-->


<!-- If no online access, fallback to our hardcoded version of jQuery -->



<!-- Custom JS -->
<!-- <script src="/js/userprofile.js"></script> -->
